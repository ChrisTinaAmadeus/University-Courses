# CSS 选择器使用手册

本手册详细说明了本实验实现的 CSS 选择器语法及其使用方法。解析器支持基础选择器、层级组合器、伪类以及伪元素选择器。

## 1. 基础选择器 

| 选择器类型 | 语法示例 | 说明 |
| :--- | :--- | :--- |
| **通配符选择器** | `*` | 匹配文档中的所有元素。 |
| **标签选择器** | `div` | 匹配所有 `<div>` 标签的元素。 |
| **ID 选择器** | `#header` | 匹配 `id` 属性为 "header" 的元素。 |
| **类选择器** | `.active` | 匹配 `class` 属性包含 "active" 的元素。 |
| **多类选择器** | `.btn.primary` | 匹配同时拥有 "btn" 和 "primary" 类的元素。 |

## 2. 组合选择器

支持通过组合符将多个基础选择器连接起来，表达元素之间的关系。

| 组合类型 | 语法示例 | 说明 |
| :--- | :--- | :--- |
| **后代选择器** | `div p` | (空格) 匹配 `div` 元素内部的所有 `p` 元素（包括孙子结点等）。 |
| **子元素选择器** | `div > p` | (大于号) 仅匹配 `div` 元素的**直接**子元素 `p`。 |
| **相邻兄弟选择器** | `h1 + p` | (加号) 匹配紧接在 `h1` 元素后的第一个 `p` 兄弟元素。 |
| **通用兄弟选择器** | `h1 ~ p` | (波浪号) 匹配 `h1` 元素之后的所有 `p` 兄弟元素。 |

## 3. 伪类选择器

用于根据元素的状态或位置进行筛选。

| 选择器 | 说明 |
| :--- | :--- |
| `:empty` | 匹配没有任何子结点（包括文本结点）的元素。 |
| `:first-child` | 匹配其父元素的第一个子元素。 |

## 4. 伪元素选择器

用于选择元素的特定部分或生成内容。本实现支持双冒号 `::` 语法。

| 选择器 | 说明 |
| :--- | :--- |
| `::first-letter` | 选中块级元素第一行的第一个字母。 |
| `::first-line` | 选中块级元素的第一行文本。 |
| `::before("text")` | 在元素内容的最前面插入生成的文本结点。需配合括号指定内容。 |
| `::after("text")` | 在元素内容的最后面插入生成的文本结点。需配合括号指定内容。 |

**注意**：`::before` 和 `::after` 在本实现中会修改 DOM 树结构，插入真实的文本结点。

## 5. 分组选择器

| 语法示例 | 说明 |
| :--- | :--- |
| `div, p, #id` | (逗号) 同时匹配 `div`、`p` 和 `#id` 元素，结果集去重。 |

## 6. 嵌套使用示例

```css
/* 选中 id 为 main 下的所有 class 为 article 的 div 的直接子元素 p 的第一行 */
#main div.article > p::first-line

/* 选中 h2 之后的所有 ul 中的第一个 li */
h2 ~ ul > li:first-child
```

## 7. 附加：XPath 选择器

本解析器同时实现了 XPath 1.0 的核心子集，支持路径查找与属性过滤。

| 语法类型 | 示例 | 说明 |
| :--- | :--- | :--- |
| **绝对路径** | `/html/body/div` | 从根结点开始逐层查找。 |
| **相对路径** | `//div` | (双斜杠) 在当前上下文的**所有后代**中递归查找 `div`。 |
| **属性谓语** | `//div[@id='main']` | 查找 `id` 属性为 "main" 的 `div`。 |
| **索引定位** | `//ul/li[1]` | 查找 `ul` 下的**第一个** `li` 子元素 (索引从 1 开始)。 |
| **文本结点** | `//h1/text()` | 选中 `h1` 元素下的文本结点。 |
| **属性组合** | `//span[@class='date']` | 查找 `class` 属性为 "date" 的 `span`。 |

**XPath 示例**:
```xpath
/* 查找所有 class 为 'news-item' 的 div 下的第一个 a 标签 */
//div[@class='news-item']/a[1]

/* 查找 id 为 'title' 的元素的文本内容 */
//*[@id='title']/text()
```
